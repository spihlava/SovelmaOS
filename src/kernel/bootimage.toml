# Bootimage configuration for SovelmaOS
#
# Configures QEMU for running the kernel and tests.

[default]
run-command = [
    "qemu-system-x86_64",
    "-drive", "format=raw,file={}",
    "-serial", "stdio",
]

# Test-specific configuration
# Uses isa-debug-exit device to signal test pass/fail
[test]
test-args = [
    "-device", "isa-debug-exit,iobase=0xf4,iosize=0x04",
    "-serial", "stdio",
    "-display", "none",
]

# Exit code mapping:
# QEMU exit code = (written_value << 1) | 1
# Success (0x10) -> 33
# Failed (0x11) -> 35
test-success-exit-code = 33
